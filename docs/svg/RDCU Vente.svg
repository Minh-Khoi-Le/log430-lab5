<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1197px" preserveAspectRatio="none" style="width:1698px;height:1197px;background:#FFFFFF;" version="1.1" viewBox="0 0 1698 1197" width="1698px" zoomAndPan="magnify"><title>RDCU - Vente produit</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="168.9844" x="765.5344" y="27.9951">RDCU - Vente produit</text><rect fill="none" height="468.9297" style="stroke:#000000;stroke-width:1.5;" width="1681.0532" x="10" y="630.8516"/><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="998.1875" width="8" x="39.2651" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="43" x2="43" y1="118.5938" y2="1116.7813"/></g><g><title>Cart Context</title><rect fill="#000000" fill-opacity="0.00000" height="998.1875" width="8" x="191.5449" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="194.9746" x2="194.9746" y1="118.5938" y2="1116.7813"/></g><g><title>UI React</title><rect fill="#000000" fill-opacity="0.00000" height="998.1875" width="8" x="333.3892" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="336.9229" x2="336.9229" y1="118.5938" y2="1116.7813"/></g><g><title>Auth Middleware</title><rect fill="#000000" fill-opacity="0.00000" height="998.1875" width="8" x="445.8086" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="448.8555" x2="448.8555" y1="118.5938" y2="1116.7813"/></g><g><title>Cache Middleware</title><rect fill="#000000" fill-opacity="0.00000" height="998.1875" width="8" x="593.0776" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="596.7617" x2="596.7617" y1="118.5938" y2="1116.7813"/></g><g><title>Express API</title><rect fill="#000000" fill-opacity="0.00000" height="998.1875" width="8" x="753.6411" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="756.8545" x2="756.8545" y1="118.5938" y2="1116.7813"/></g><g><title>Sale Controller</title><rect fill="#000000" fill-opacity="0.00000" height="998.1875" width="8" x="916.604" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="919.8081" x2="919.8081" y1="118.5938" y2="1116.7813"/></g><g><title>Product Service</title><rect fill="#000000" fill-opacity="0.00000" height="998.1875" width="8" x="1122.3247" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1125.374" x2="1125.374" y1="118.5938" y2="1116.7813"/></g><g><title>Redis Cache</title><rect fill="#000000" fill-opacity="0.00000" height="998.1875" width="8" x="1244.4751" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1248.2754" x2="1248.2754" y1="118.5938" y2="1116.7813"/></g><g><title>Prisma Client</title><rect fill="#000000" fill-opacity="0.00000" height="998.1875" width="8" x="1357.9644" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1361.6748" x2="1361.6748" y1="118.5938" y2="1116.7813"/></g><g><title>PostgreSQL DB</title><rect fill="#000000" fill-opacity="0.00000" height="998.1875" width="8" x="1617.2593" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1620.4653" x2="1620.4653" y1="118.5938" y2="1116.7813"/></g><g class="participant participant-head" data-participant="Client"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="20" y="115.292">Client</text><ellipse cx="43.2651" cy="50.7969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M43.2651,58.7969 L43.2651,85.7969 M30.2651,66.7969 L56.2651,66.7969 M43.2651,85.7969 L30.2651,100.7969 M43.2651,85.7969 L56.2651,100.7969" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="Client"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="20" y="1128.7764">Client</text><ellipse cx="43.2651" cy="1140.5781" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M43.2651,1148.5781 L43.2651,1175.5781 M30.2651,1156.5781 L56.2651,1156.5781 M43.2651,1175.5781 L30.2651,1190.5781 M43.2651,1175.5781 L56.2651,1190.5781" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="CartCtx"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103.1406" x="143.9746" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89.1406" x="150.9746" y="107.292">Cart Context</text></g><g class="participant participant-tail" data-participant="CartCtx"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103.1406" x="143.9746" y="1115.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89.1406" x="150.9746" y="1135.7764">Cart Context</text></g><g class="participant participant-head" data-participant="Frontend"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="72.9326" x="300.9229" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58.9326" x="307.9229" y="107.292">UI React</text></g><g class="participant participant-tail" data-participant="Frontend"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="72.9326" x="300.9229" y="1115.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58.9326" x="307.9229" y="1135.7764">UI React</text></g><g class="participant participant-head" data-participant="Auth"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="131.9063" x="383.8555" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.9063" x="390.8555" y="107.292">Auth Middleware</text></g><g class="participant participant-tail" data-participant="Auth"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="131.9063" x="383.8555" y="1115.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.9063" x="390.8555" y="1135.7764">Auth Middleware</text></g><g class="participant participant-head" data-participant="Cache"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="142.6318" x="525.7617" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128.6318" x="532.7617" y="107.292">Cache Middleware</text></g><g class="participant participant-tail" data-participant="Cache"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="142.6318" x="525.7617" y="1115.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128.6318" x="532.7617" y="1135.7764">Cache Middleware</text></g><g class="participant participant-head" data-participant="Backend"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95.5732" x="709.8545" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81.5732" x="716.8545" y="107.292">Express API</text></g><g class="participant participant-tail" data-participant="Backend"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95.5732" x="709.8545" y="1115.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81.5732" x="716.8545" y="1135.7764">Express API</text></g><g class="participant participant-head" data-participant="Controller"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117.5918" x="861.8081" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103.5918" x="868.8081" y="107.292">Sale Controller</text></g><g class="participant participant-tail" data-participant="Controller"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117.5918" x="861.8081" y="1115.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103.5918" x="868.8081" y="1135.7764">Sale Controller</text></g><g class="participant participant-head" data-participant="ProductSvc"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="123.9014" x="1064.374" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109.9014" x="1071.374" y="107.292">Product Service</text></g><g class="participant participant-tail" data-participant="ProductSvc"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="123.9014" x="1064.374" y="1115.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109.9014" x="1071.374" y="1135.7764">Product Service</text></g><g class="participant participant-head" data-participant="Redis"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100.3994" x="1198.2754" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86.3994" x="1205.2754" y="107.292">Redis Cache</text></g><g class="participant participant-tail" data-participant="Redis"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100.3994" x="1198.2754" y="1115.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86.3994" x="1205.2754" y="1135.7764">Redis Cache</text></g><g class="participant participant-head" data-participant="Prisma"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="106.5791" x="1308.6748" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92.5791" x="1315.6748" y="107.292">Prisma Client</text></g><g class="participant participant-tail" data-participant="Prisma"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="106.5791" x="1308.6748" y="1115.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92.5791" x="1315.6748" y="1135.7764">Prisma Client</text></g><g class="participant participant-head" data-participant="DB"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119.5879" x="1561.4653" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105.5879" x="1568.4653" y="107.292">PostgreSQL DB</text></g><g class="participant participant-tail" data-participant="DB"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119.5879" x="1561.4653" y="1115.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105.5879" x="1568.4653" y="1135.7764">PostgreSQL DB</text></g><g class="message" data-participant-1="Client" data-participant-2="CartCtx"><polygon fill="#181818" points="183.5449,145.7266,193.5449,149.7266,183.5449,153.7266,187.5449,149.7266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="43.2651" x2="189.5449" y1="149.7266" y2="149.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128.2798" x="50.2651" y="144.6606">addToCart(product)</text></g><g class="message" data-participant-1="CartCtx" data-participant-2="Frontend"><polygon fill="#181818" points="325.3892,174.8594,335.3892,178.8594,325.3892,182.8594,329.3892,178.8594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="195.5449" x2="331.3892" y1="178.8594" y2="178.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117.8442" x="202.5449" y="173.7935">updateCartState()</text></g><g class="message" data-participant-1="Client" data-participant-2="Frontend"><polygon fill="#181818" points="325.3892,203.9922,335.3892,207.9922,325.3892,211.9922,329.3892,207.9922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="43.2651" x2="331.3892" y1="207.9922" y2="207.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69.4941" x="50.2651" y="202.9263">checkout()</text></g><g class="message" data-participant-1="Frontend" data-participant-2="Backend"><polygon fill="#181818" points="745.6411,233.125,755.6411,237.125,745.6411,241.125,749.6411,237.125" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="337.3892" x2="751.6411" y1="237.125" y2="237.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="279.4937" x="344.3892" y="232.0591">POST /api/v1/sales {userId, storeId, items}</text></g><g class="message" data-participant-1="Backend" data-participant-2="Auth"><polygon fill="#181818" points="460.8086,262.2578,450.8086,266.2578,460.8086,270.2578,456.8086,266.2578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="454.8086" x2="756.6411" y1="266.2578" y2="266.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129.6255" x="466.8086" y="261.1919">validateAuth(token)</text></g><g class="message" data-participant-1="Auth" data-participant-2="Backend"><polygon fill="#181818" points="745.6411,291.3906,755.6411,295.3906,745.6411,299.3906,749.6411,295.3906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="449.8086" x2="751.6411" y1="295.3906" y2="295.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123.4365" x="456.8086" y="290.3247">user authenticated</text></g><g class="message" data-participant-1="Backend" data-participant-2="Cache"><polygon fill="#181818" points="608.0776,320.5234,598.0776,324.5234,608.0776,328.5234,604.0776,324.5234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="602.0776" x2="756.6411" y1="324.5234" y2="324.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111.8521" x="614.0776" y="319.4575">checkCache(key)</text></g><g class="message" data-participant-1="Cache" data-participant-2="Redis"><polygon fill="#181818" points="1236.4751,349.6563,1246.4751,353.6563,1236.4751,357.6563,1240.4751,353.6563" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="597.0776" x2="1242.4751" y1="353.6563" y2="353.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95.1387" x="604.0776" y="348.5903">getCache(key)</text></g><g class="message" data-participant-1="Redis" data-participant-2="Cache"><polygon fill="#181818" points="608.0776,378.7891,598.0776,382.7891,608.0776,386.7891,604.0776,382.7891" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="602.0776" x2="1247.4751" y1="382.7891" y2="382.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72.4521" x="614.0776" y="377.7231">cache miss</text></g><g class="message" data-participant-1="Cache" data-participant-2="Backend"><polygon fill="#181818" points="745.6411,407.9219,755.6411,411.9219,745.6411,415.9219,749.6411,411.9219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="597.0776" x2="751.6411" y1="411.9219" y2="411.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136.5635" x="604.0776" y="406.856">proceed to controller</text></g><g class="message" data-participant-1="Backend" data-participant-2="Controller"><polygon fill="#181818" points="908.604,437.0547,918.604,441.0547,908.604,445.0547,912.604,441.0547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="757.6411" x2="914.604" y1="441.0547" y2="441.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.9629" x="764.6411" y="435.9888">create(req, res, next)</text></g><g class="message" data-participant-1="Controller" data-participant-2="ProductSvc"><polygon fill="#181818" points="1114.3247,466.1875,1124.3247,470.1875,1114.3247,474.1875,1118.3247,470.1875" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="920.604" x2="1120.3247" y1="470.1875" y2="470.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134.4624" x="927.604" y="465.1216">validateStock(items)</text></g><g class="message" data-participant-1="ProductSvc" data-participant-2="Prisma"><polygon fill="#181818" points="1349.9644,495.3203,1359.9644,499.3203,1349.9644,503.3203,1353.9644,499.3203" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1126.3247" x2="1355.9644" y1="499.3203" y2="499.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139.0835" x="1133.3247" y="494.2544">findMany(productIds)</text></g><g class="message" data-participant-1="Prisma" data-participant-2="DB"><polygon fill="#181818" points="1609.2593,524.4531,1619.2593,528.4531,1609.2593,532.4531,1613.2593,528.4531" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1361.9644" x2="1615.2593" y1="528.4531" y2="528.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152.896" x="1368.9644" y="523.3872">SELECT products, stock</text></g><g class="message" data-participant-1="DB" data-participant-2="Prisma"><polygon fill="#181818" points="1372.9644,553.5859,1362.9644,557.5859,1372.9644,561.5859,1368.9644,557.5859" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="1366.9644" x2="1620.2593" y1="557.5859" y2="557.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127.4038" x="1378.9644" y="552.52">products with stock</text></g><g class="message" data-participant-1="Prisma" data-participant-2="ProductSvc"><polygon fill="#181818" points="1137.3247,582.7188,1127.3247,586.7188,1137.3247,590.7188,1133.3247,586.7188" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="1131.3247" x2="1360.9644" y1="586.7188" y2="586.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83.7002" x="1143.3247" y="581.6528">product data</text></g><g class="message" data-participant-1="ProductSvc" data-participant-2="Controller"><polygon fill="#181818" points="931.604,611.8516,921.604,615.8516,931.604,619.8516,927.604,615.8516" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="925.604" x2="1125.3247" y1="615.8516" y2="615.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143.8315" x="937.604" y="610.7856">stock validation result</text></g><path d="M10,630.8516 L74.4429,630.8516 L74.4429,637.9844 L64.4429,647.9844 L10,647.9844 L10,630.8516" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="468.9297" style="stroke:#000000;stroke-width:1.5;" width="1681.0532" x="10" y="630.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="25" y="643.9185">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="103.2378" x="89.4429" y="643.062">[Stock suffisant]</text><g class="message" data-participant-1="Controller" data-participant-2="Prisma"><polygon fill="#181818" points="1349.9644,665.1172,1359.9644,669.1172,1349.9644,673.1172,1353.9644,669.1172" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="920.604" x2="1355.9644" y1="669.1172" y2="669.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159.7451" x="927.604" y="664.0513">sale.create (transaction)</text></g><g class="message" data-participant-1="Prisma" data-participant-2="DB"><polygon fill="#181818" points="1609.2593,694.25,1619.2593,698.25,1609.2593,702.25,1613.2593,698.25" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1361.9644" x2="1615.2593" y1="698.25" y2="698.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.4424" x="1368.9644" y="693.1841">BEGIN TRANSACTION</text></g><g class="message" data-participant-1="Prisma" data-participant-2="DB"><polygon fill="#181818" points="1609.2593,723.3828,1619.2593,727.3828,1609.2593,731.3828,1613.2593,727.3828" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1361.9644" x2="1615.2593" y1="727.3828" y2="727.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114.8228" x="1368.9644" y="722.3169">INSERT INTO Sale</text></g><g class="message" data-participant-1="Prisma" data-participant-2="DB"><polygon fill="#181818" points="1609.2593,752.5156,1619.2593,756.5156,1609.2593,760.5156,1613.2593,756.5156" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1361.9644" x2="1615.2593" y1="756.5156" y2="756.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192.8926" x="1368.9644" y="751.4497">INSERT INTO SaleLine (batch)</text></g><g class="message" data-participant-1="Prisma" data-participant-2="DB"><polygon fill="#181818" points="1609.2593,781.6484,1619.2593,785.6484,1609.2593,789.6484,1613.2593,785.6484" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1361.9644" x2="1615.2593" y1="785.6484" y2="785.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="235.2949" x="1368.9644" y="780.5825">UPDATE Stock (decrease quantities)</text></g><g class="message" data-participant-1="DB" data-participant-2="Prisma"><polygon fill="#181818" points="1372.9644,810.7813,1362.9644,814.7813,1372.9644,818.7813,1368.9644,814.7813" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="1366.9644" x2="1620.2593" y1="814.7813" y2="814.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118.2886" x="1378.9644" y="809.7153">COMMIT SUCCESS</text></g><g class="message" data-participant-1="Prisma" data-participant-2="Controller"><polygon fill="#181818" points="931.604,839.9141,921.604,843.9141,931.604,847.9141,927.604,843.9141" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="925.604" x2="1360.9644" y1="843.9141" y2="843.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130.5459" x="937.604" y="838.8481">{saleId, total, date}</text></g><g class="message" data-participant-1="Controller" data-participant-2="Redis"><polygon fill="#181818" points="1236.4751,869.0469,1246.4751,873.0469,1236.4751,877.0469,1240.4751,873.0469" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="920.604" x2="1242.4751" y1="873.0469" y2="873.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162.6143" x="927.604" y="867.981">invalidateCache(pattern)</text></g><g class="message" data-participant-1="Controller" data-participant-2="Backend"><polygon fill="#181818" points="768.6411,898.1797,758.6411,902.1797,768.6411,906.1797,764.6411,902.1797" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="762.6411" x2="919.604" y1="902.1797" y2="902.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80.6787" x="774.6411" y="897.1138">201 Created</text></g><g class="message" data-participant-1="Backend" data-participant-2="Frontend"><polygon fill="#181818" points="348.3892,927.3125,338.3892,931.3125,348.3892,935.3125,344.3892,931.3125" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="342.3892" x2="756.6411" y1="931.3125" y2="931.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174.6494" x="354.3892" y="926.2466">{success: true, sale: {...}}</text></g><g class="message" data-participant-1="Frontend" data-participant-2="CartCtx"><polygon fill="#181818" points="206.5449,956.4453,196.5449,960.4453,206.5449,964.4453,202.5449,960.4453" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="200.5449" x2="336.3892" y1="960.4453" y2="960.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69.6973" x="212.5449" y="955.3794">clearCart()</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="10" x2="1691.0532" y1="969.4453" y2="969.4453"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="114.8394" x="15" y="979.6558">[Stock insuffisant]</text><g class="message" data-participant-1="ProductSvc" data-participant-2="Controller"><polygon fill="#181818" points="931.604,1000.3828,921.604,1004.3828,931.604,1008.3828,927.604,1004.3828" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="925.604" x2="1125.3247" y1="1004.3828" y2="1004.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181.7207" x="937.604" y="999.3169">{error: "insufficient_stock"}</text></g><g class="message" data-participant-1="Controller" data-participant-2="Backend"><polygon fill="#181818" points="768.6411,1029.5156,758.6411,1033.5156,768.6411,1037.5156,764.6411,1033.5156" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="762.6411" x2="919.604" y1="1033.5156" y2="1033.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111.6045" x="774.6411" y="1028.4497">400 Bad Request</text></g><g class="message" data-participant-1="Backend" data-participant-2="Frontend"><polygon fill="#181818" points="348.3892,1058.6484,338.3892,1062.6484,348.3892,1066.6484,344.3892,1062.6484" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="342.3892" x2="756.6411" y1="1062.6484" y2="1062.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176.814" x="354.3892" y="1057.5825">{error: "Stock insuffisant"}</text></g><g class="message" data-participant-1="Frontend" data-participant-2="Client"><polygon fill="#181818" points="54.2651,1087.7813,44.2651,1091.7813,54.2651,1095.7813,50.2651,1091.7813" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="48.2651" x2="336.3892" y1="1091.7813" y2="1091.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105.6631" x="60.2651" y="1086.7153">Affichage erreur</text></g><!--SRC=[XLHDRzim3BtxLn0vEK2IjiDEEGn876ymq7miTdOTD8bjXBYsAybfYo3_VPHi9xOpT2TRvEFJunCb8qsAi5q4EnZ3BymCGg5oKKe3diUuoHK4gQIuLp1b99S5ommC0bf0a1FytGo0QR21mBntKRi8jaWa3l5TMNWckf1PQVQmb4Aa-COKEgIDzRVZU-p3NB2B2zyBXPeODf63p1a_t6mPC-hOQbTvcgAgk2xBBdPZlU06ObH7oQjzwrXyv5ti5eMiLJcSM_Vff7vXjQCrcOtqKBaspmhZdu-mc3lKOkvvLH6ClpLUmnIO44bkbtvHYHfwJP9mZUC4B0l13DfSREZ77xReMZ2IpWzvQIX_YHAYjf40ctMSm1qhvDtnuKwJaHfEfKOLYH5e6XQqFzBWYpvxJHKHk5EUmf6bqkgmIz_ab1rwBjNPm_81ep3favpWearLZK8jrIty0txOlcsS0DKnJE4PJIjTHSTj0lTzaLfVQwyYo4-EAC3amA-pqTPnYLekXTPLXQyZe04SGKRtWZHTCLHndPkM5R79-S5tZWsz5iBXtR1CuKbcOicoZ-QG8-6mBakunPmmSVWO1WdK2ErEWnyyoetRL4qUtYJPNc4Qfhx46WiaatMazRjtD4r7Ci-i1MLgwFr8wUQuf2wVdgIcwVO0-gxKqkmqJIeZmJUAPPfU3c8RKaclsNdu8rf1ifsjubcGHElLBIHQnU4seK-o1dlX_uzub1bj_8SPll_7bhlDOfQ4TJU-G2jK8xoMr9Cq4hMjwRiTh9VBA85u5mHX7BT8-mwURFFswfZSi7HaBSVpZLNDPCkicPvgm0jc32fdLBkWCyzVxXyWSEOAWbtck7lzJxhadDxFAHXLuiWT2KKdaydPgca_2TStYAV8b7k3XXwcv4dbaSpQP_xP-9nGgLnDOL2NSFim_NP3DJX_rjFN-tjQ2VBbjKHjFkchsU56sk2ch-fPdCBCAjcpPmGgnb9v1FWB]--></g></svg>